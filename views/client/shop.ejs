<%- include('../layout/header.ejs')-%>

<body>
  <!-- Button trigger modal -->

  <!-- Modal -->
  <div
    class="modal fade"
    style="display: none"
    id="exampleModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
    style="
      width: 100vw;
      backdrop-filter: blur(1rem);
      height: 100vh;
      position: fixed;
      z-index: 999999;
      background-color: rgb(36 34 34 / 33%);
    "
  >
    <div
      class="modal fade show"
      style="display: block; border-radius: 15px"
      id="exampleModal"
    >
      <div class="modal-dialog hh" style="display: block">
        <style>
          @media (min-width: 576px) {
            .hh {
              width: 20vw !important;
            }
          }
        </style>
        <div class="modal-content">
          <div class="modal-header border-0">
            <button
              type="button border-0"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body text-center" style="margin-top: -1rem">
            <h5>Your Cart is add</h5>
          </div>
          <!-- <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary">Save changes</button>
                    </div> -->
        </div>
      </div>
    </div>
  </div>
  <div class="page-wrapper">
    <%- include('../layout/nave.ejs') -%>

    <main class="main">
      <div
        class="page-header text-center"
        style="background-image: url('images/page-header-bg.jpg')"
      >
        <div class="container">
          <h1 class="page-title text-capitalize">
            <%=locals.banner || 'products' %><span>Shop</span>
          </h1>
        </div>
        <!-- End .container -->
      </div>
      <!-- End .page-header -->
      <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
        <div class="container">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item"><a href="#">Shop</a></li>
            <li class="breadcrumb-item"><a href="#">No Sidebar</a></li>
            <li class="breadcrumb-item active" aria-current="page">Boxed</li>
          </ol>
        </div>
        <!-- End .container -->
      </nav>
      <!-- End .breadcrumb-nav -->

      <div class="page-content">
        <div class="container">
          <div class="toolbox">
            <div class="toolbox-left"></div>
            <!-- End .toolbox-left -->

            <div class="toolbox-center">
              <div class="toolbox-info">
                <% const count=Allproduct.length<12?Allproduct.length:12 %>
                Showing <span> <%=count %> of <%=le %> </span> Products
              </div>
              <!-- End .toolbox-info -->
            </div>
            <!-- End .toolbox-center -->

            <div class="toolbox-right">
              <div class="toolbox-sort">
                <label for="sortby">Sort by:</label>
                <div class="select-custom">
                  <select
                    name="sortby"
                    id="sortby"
                    onchange="filter(this,'<%=locals.login?locals.login:false  %>','<%=locals.now%>')"
                    class="form-control"
                  >
                    <option value="popularity">Most Popular</option>
                    <option value="premium">prmium</option>
                    <option value="cheapest">cheapest</option>
                    <option value="defualt" selected="selected">Latest</option>
                  </select>
                </div>
              </div>
              <!-- End .toolbox-sort -->
            </div>
            <!-- End .toolbox-right -->
          </div>
          <!-- End .toolbox -->

          <div class="products">
            <div class="row productGalery">
              <% if(Allproduct.length==0){ %>
              <div
                class="d-flex w-100 text-center justify-content-center align-items-center"
              >
                <h1 class="opacity-50 text-capitalize" style="opacity: 0.7">
                  no product
                </h1>
              </div>
              <% } %> <% Allproduct.forEach(e=>{ %>

              <div class="col-6 col-md-4 col-lg-4 col-xl-3">
                <div
                  class="product product-7 text-center"
                  style="
                    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
                    border-radius: 15px;
                    border: 0.5px solid #0000001a;
                  "
                >
                  <figure class="product-media">
                    <% if(e?.offer){ %>
                      <span class="product-label label-sale bg-danger">
                        <%=e.offer.offer %>% off
                      </span>
                      <% }else{ %>
                          <span class="product-label label-new">
                             new
                            </span>
                          <% } %>
                    <a href="/productDets?proId=<%=e._id  %>">
                      <img
                        src="/productImage/<%=e.images[0]  %>"
                        alt="Product image"
                        class="product-image"
                      />
                      <img
                        src="/productImage/<%=e.images[1]?e.images[1]:e.images[0]  %>"
                        alt="Product image"
                        class="product-image-hover"
                      />
                    </a>

                    <div class="product-action-vertical">
                      <a
                       onclick="wishList('<%=e._id%>','<%=locals.login ?locals.login:false%>')"
                        class="btn-product-icon btn-wishlist btn-expandable"
                        ><span>add to wishlist</span></a
                      >
                    </div>
                    <!-- End .product-action-vertical -->

                    <div class="product-action">
                      <div
                        onclick="addCart('<%=e._id  %>','<%=locals.login?locals.login:false  %>',1)"
                        class="btn-product btn-cart"
                        style="cursor: pointer"
                      >
                        <span>add to cart</span>
                      </div>
                    </div>
                    <!-- End .product-action -->
                  </figure>
                  <!-- End .product-media -->

                  <div class="product-body">
                    <div class="product-cat">
                      <a href="#"> <%= e.category.gender %> </a>
                    </div>
                    <!-- End .product-cat -->
                    <h3 class="product-title">
                      <a href="product.html">
                        <%= e.name %>
                        <br />
                      </a>
                    </h3>
                    <!-- End .product-title -->
                    <div class="product-price">
                      <% if(e.offer){ %>
                      <span class="new-price">$<%=e.price %></span>
                      <span class="old-price">$<%=e.actualPrice %></span>
                      <% }else{ %> $<%=e.price %> <% } %>
                    </div>
                    <!-- End .product-price -->
                    <div class="ratings-container">
                      <div class="ratings">
                        <div class="ratings-val" style="width: 20%"></div>
                        <!-- End .ratings-val -->
                      </div>
                      <!-- End .ratings -->
                      <span class="ratings-text">( 2 Reviews )</span>
                    </div>
                    <!-- End .rating-container -->

                    <div
                      class="product-nav product-nav-thumbs"
                      style="gap: 1rem"
                    >
                      <% e.images.forEach(e=>{ %>
                      <div
                        href="#"
                        class="active overflow-hidden"
                        style="
                          width: 40px;
                          height: 40px;
                          border: 0.5px solid #99999977;
                        "
                      >
                        <img
                          src="/productImage/<%=e  %>"
                          class="w-100 h-100 object-fit-cover"
                          alt=""
                        />
                      </div>
                      <% }) %>
                    </div>
                    <!-- End .product-nav -->
                  </div>
                  <!-- End .product-body -->
                </div>
              </div>
              <!-- End .col-sm-6 col-lg-4 col-xl-3 -->
              <% }) %>
            </div>
            <!-- End .row -->
            <br />
            <br />
            <nav aria-label="Page navigation">
              <ul class="pagination justify-content-center">
                <% if(gg<=1){ %>
                <li class="page-item disabled">
                  <a
                    class="page-link page-link-prev"
                    href="#"
                    aria-label="Previous"
                    tabindex="-1"
                    aria-disabled="true"
                  >
                    <span aria-hidden="true"
                      ><i class="icon-long-arrow-left"></i></span
                    >Prev
                  </a>
                </li>
                <li class="page-item active" aria-current="page">
                  <a class="page-link" href="/shop?page=1">1</a>
                </li>
                <li class="page-item-total">1 of <%= gg==0?gg+1:gg %></li>

                <li class="page-item disabled">
                  <a
                    class="page-link page-link-next"
                    href="#"
                    aria-label="Next"
                  >
                    Next
                    <span aria-hidden="true"
                      ><i class="icon-long-arrow-right"></i
                    ></span>
                  </a>
                </li>
                <% }else{ %>
                <li class="page-item <%=now==1?'disabled ':'' %>">
                  <a
                    class="page-link page-link-prev"
                    href="/shop?page=<%=now-1  %>"
                    aria-label="Previous"
                    tabindex="-1"
                    aria-disabled="true"
                  >
                    <span aria-hidden="true"
                      ><i class="icon-long-arrow-left"></i></span
                    >Prev
                  </a>
                </li>
                <%let flag=0; %> <% for(let i=now;i<=gg;i++){ %> <% if(flag==3){
                %> <% break;} flag++; %>
                <li class="page-item active" aria-current="page">
                  <a class="page-link" href="/shop?page=<%=i  %>"> <%=i %> </a>
                </li>

                <% } %>

                <li class="page-item-total"><%=now%>of <%=gg %></li>

                <li class="page-item <%=now==gg?'disabled ':'' %>">
                  <a
                    class="page-link page-link-next"
                    href="/shop?page=<%=next+1  %>"
                  >
                    Next
                    <span aria-hidden="true"
                      ><i class="icon-long-arrow-right"></i
                    ></span>
                  </a>
                </li>
                <% } %>
              </ul>
            </nav>
          </div>
          <!-- End .products -->

          <div class="sidebar-filter-overlay"></div>
          <!-- End .sidebar-filter-overlay -->
          <aside class="sidebar-shop sidebar-filter">
            <div class="sidebar-filter-wrapper">
              <div class="widget widget-clean">
                <label><i class="icon-close"></i>Filters</label>
                <a href="#" class="sidebar-filter-clear">Clean All</a>
              </div>
              <!-- End .widget -->
              <div class="widget widget-collapsible">
                <h3 class="widget-title">
                  <a
                    data-toggle="collapse"
                    href="#widget-1"
                    role="button"
                    aria-expanded="true"
                    aria-controls="widget-1"
                  >
                    Category
                  </a>
                </h3>
                <!-- End .widget-title -->

                <div class="collapse show" id="widget-1">
                  <div class="widget-body">
                    <div class="filter-items filter-items-count">
                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-1"
                          />
                          <label class="custom-control-label" for="cat-1"
                            >Dresses</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">3</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-2"
                          />
                          <label class="custom-control-label" for="cat-2"
                            >T-shirts</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">0</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-3"
                          />
                          <label class="custom-control-label" for="cat-3"
                            >Bags</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">4</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-4"
                          />
                          <label class="custom-control-label" for="cat-4"
                            >Jackets</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">2</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-5"
                          />
                          <label class="custom-control-label" for="cat-5"
                            >Shoes</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">2</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-6"
                          />
                          <label class="custom-control-label" for="cat-6"
                            >Jumpers</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">1</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-7"
                          />
                          <label class="custom-control-label" for="cat-7"
                            >Jeans</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">1</span>
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="cat-8"
                          />
                          <label class="custom-control-label" for="cat-8"
                            >Sportwear</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                        <span class="item-count">0</span>
                      </div>
                      <!-- End .filter-item -->
                    </div>
                    <!-- End .filter-items -->
                  </div>
                  <!-- End .widget-body -->
                </div>
                <!-- End .collapse -->
              </div>
              <!-- End .widget -->

              <div class="widget widget-collapsible">
                <h3 class="widget-title">
                  <a
                    data-toggle="collapse"
                    href="#widget-2"
                    role="button"
                    aria-expanded="true"
                    aria-controls="widget-2"
                  >
                    Size
                  </a>
                </h3>
                <!-- End .widget-title -->

                <div class="collapse show" id="widget-2">
                  <div class="widget-body">
                    <div class="filter-items">
                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="size-1"
                          />
                          <label class="custom-control-label" for="size-1"
                            >XS</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="size-2"
                          />
                          <label class="custom-control-label" for="size-2"
                            >S</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            checked
                            id="size-3"
                          />
                          <label class="custom-control-label" for="size-3"
                            >M</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            checked
                            id="size-4"
                          />
                          <label class="custom-control-label" for="size-4"
                            >L</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="size-5"
                          />
                          <label class="custom-control-label" for="size-5"
                            >XL</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="size-6"
                          />
                          <label class="custom-control-label" for="size-6"
                            >XXL</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->
                    </div>
                    <!-- End .filter-items -->
                  </div>
                  <!-- End .widget-body -->
                </div>
                <!-- End .collapse -->
              </div>
              <!-- End .widget -->

              <div class="widget widget-collapsible">
                <h3 class="widget-title">
                  <a
                    data-toggle="collapse"
                    href="#widget-3"
                    role="button"
                    aria-expanded="true"
                    aria-controls="widget-3"
                  >
                    Colour
                  </a>
                </h3>
                <!-- End .widget-title -->

                <div class="collapse show" id="widget-3">
                  <div class="widget-body">
                    <div class="filter-colors">
                      <a href="#" style="background: #b87145"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" style="background: #f0c04a"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" style="background: #333333"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" class="selected" style="background: #cc3333"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" style="background: #3399cc"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" style="background: #669933"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" style="background: #f2719c"
                        ><span class="sr-only">Color Name</span></a
                      >
                      <a href="#" style="background: #ebebeb"
                        ><span class="sr-only">Color Name</span></a
                      >
                    </div>
                    <!-- End .filter-colors -->
                  </div>
                  <!-- End .widget-body -->
                </div>
                <!-- End .collapse -->
              </div>
              <!-- End .widget -->

              <div class="widget widget-collapsible">
                <h3 class="widget-title">
                  <a
                    data-toggle="collapse"
                    href="#widget-4"
                    role="button"
                    aria-expanded="true"
                    aria-controls="widget-4"
                  >
                    Brand
                  </a>
                </h3>
                <!-- End .widget-title -->

                <div class="collapse show" id="widget-4">
                  <div class="widget-body">
                    <div class="filter-items">
                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-1"
                          />
                          <label class="custom-control-label" for="brand-1"
                            >Next</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-2"
                          />
                          <label class="custom-control-label" for="brand-2"
                            >River Island</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-3"
                          />
                          <label class="custom-control-label" for="brand-3"
                            >Geox</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-4"
                          />
                          <label class="custom-control-label" for="brand-4"
                            >New Balance</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-5"
                          />
                          <label class="custom-control-label" for="brand-5"
                            >UGG</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-6"
                          />
                          <label class="custom-control-label" for="brand-6"
                            >F&F</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->

                      <div class="filter-item">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            id="brand-7"
                          />
                          <label class="custom-control-label" for="brand-7"
                            >Nike</label
                          >
                        </div>
                        <!-- End .custom-checkbox -->
                      </div>
                      <!-- End .filter-item -->
                    </div>
                    <!-- End .filter-items -->
                  </div>
                  <!-- End .widget-body -->
                </div>
                <!-- End .collapse -->
              </div>
              <!-- End .widget -->

              <div class="widget widget-collapsible">
                <h3 class="widget-title">
                  <a
                    data-toggle="collapse"
                    href="#widget-5"
                    role="button"
                    aria-expanded="true"
                    aria-controls="widget-5"
                  >
                    Price
                  </a>
                </h3>
                <!-- End .widget-title -->

                <div class="collapse show" id="widget-5">
                  <div class="widget-body">
                    <div class="filter-price">
                      <div class="filter-price-text">
                        Price Range:
                        <span id="filter-price-range"></span>
                      </div>
                      <!-- End .filter-price-text -->

                      <div id="price-slider"></div>
                      <!-- End #price-slider -->
                    </div>
                    <!-- End .filter-price -->
                  </div>
                  <!-- End .widget-body -->
                </div>
                <!-- End .collapse -->
              </div>
              <!-- End .widget -->
            </div>
            <!-- End .sidebar-filter-wrapper -->
          </aside>
          <!-- End .sidebar-filter -->
        </div>
        <!-- End .container -->
      </div>
      <!-- End .page-content -->
    </main>
    <%- include('../layout/lyfooter.ejs') -%>
  </div>
  <button id="scroll-top" title="Back to Top">
    <i class="icon-arrow-up"></i>
  </button>

  <%- include('../layout/mobMenu.ejs') -%>
  <script>
    const modal = document.getElementById("exampleModal");
      function wishList(id,user){
        if (user == "false") {
          console.log("hello");
          window.location.href = "/login";
        } else {
      fetch(`/wishListAdd?user=${user}&&id=${id}`,{method:'post'}).then(res=>res.json()).then(data=>{
        if (data.success) {
          cartAndWishlist()
                toast("success", "wishlist added");
              }
              if (data.exist) {
                toast("warning", "product alredy there");
              }
      })
        }
      }
      function addCart(id, user, q) {
        if (user == "false") {
          console.log("hello");
          window.location.href = "/login";
        } else {
          fetch("/addcart", {
            method: "put",
            headers: { "Content-type": "application/json" },
            body: JSON.stringify({ id, user, q }),
          })
            .then((res) => res.json())
            .then((data) => {
              if (data.success) {
                toast("success", "cart added");
                cartAndWishlist()
              }
              if (data.exist) {
                toast("warning", "product alredy there");
              }
            });
        }
      }
      function cartAndWishlist(){
        const cart=document.querySelector('.cart-count');
        const wishlist=document.querySelector('.wishlist-count');
        console.log(cart.textContent);
        if(cart){
        console.log('hello');
            fetch('/cartCount',{method:'put'}).then(res=>res.json()).then(data=>{
              data.wishlist!=0?wishlist.style.opacity=1:null
                data.cart!=0?cart.style.opacity=1:null
                data.wishlist!=0?wishlist.textContent=data.wishlist:wishlist.remove()
                data.cart!=0?cart.textContent=data.cart:cart.remove()
            })
        }else{
            console.log('hello11111');
        }
    }

    function toast(icon, title) {
      const Toast = Swal.mixin({
        toast: true,
        position: "top-end",
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        didOpen: (toast) => {
          toast.onmouseenter = Swal.stopTimer;
          toast.onmouseleave = Swal.resumeTimer;
        },
      });
      Toast.fire({
        icon: icon,
        title: title,
      });
    }
    function filter(e, login,now) {
      fetch(`/shop/filter?val=${e.value}&&now=${now}`, { method: "post" })
        .then((res) => res.json())
        .then((data) => {
          if (data.data) {
        
            const arr =  data.data;
            console.log(arr);
            const productGalery = document.querySelector(".productGalery");
            let clutter = "";
            if (arr.length == 0) {
                clutter='   <h1 class="opacity-50 text-capitalize" style="opacity: 0.7"> no product</h1>'
            } else {
                arr.forEach((e, i) => {
              clutter += ` <div class="col-6 col-md-4 col-lg-4 col-xl-3">
                                                    <div class="product product-7 text-center"
                                                        style="box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); border-radius: 15px; border: 0.5px solid #0000001a; ">
                                                        <figure class="product-media">
                                                           ${
                                                             e.offer
                                                               ? '  <span class="product-label label-sale">' +
                                                                 e.offer.offer +
                                                                 "% off </span>"
                                                               : "<span class='product-label label-new'>new</span>"
                                                           }
                                                                    <a href="/productDets?proId=${
                                                                      e._id
                                                                    }">
                                                                        <img src="/productImage/${
                                                                          e
                                                                            .images[0]
                                                                        }"
                                                                            alt="Product image" class="product-image">
                                                                        <img src="/productImage/${
                                                                          e
                                                                            .images[1]
                                                                        }"
                                                                            alt="Product image"
                                                                            class="product-image-hover">
                                                                    </a>

                                                                    <div class="product-action-vertical">
                                                                        <a  onclick="wishList('${e._id}','${login}')"
                                                                            class="btn-product-icon btn-wishlist btn-expandable"><span>add
                                                                                to
                                                                                wishlist</span></a>


                                                                    </div><!-- End .product-action-vertical -->

                                                                    <div class="product-action">
                                                                        <div onclick="addCart('${
                                                                          e._id
                                                                        }','${login}',${1})"
                                                                            class="btn-product btn-cart "
                                                                            style="cursor: pointer;">
                                                                            <span>add to cart</span>
                                                                        </div>
                                                                    </div><!-- End .product-action -->
                                                        </figure><!-- End .product-media -->

                                                        <div class="product-body">
                                                            <div class="product-cat">
                                                                <a href="#">
                                                                    ${
                                                                      e.category
                                                                        .gender
                                                                    }
                                                                </a>
                                                            </div><!-- End .product-cat -->
                                                            <h3 class="product-title"><a href="product.html">
                                                                   ${e.name}
                                                                        <br>
                                                                </a></h3><!-- End .product-title -->
                                                            <div class="product-price">
                                                                ${
                                                                  e.offer
                                                                    ? `<span class="new-price">$${e.price}</span><span class="old-price">$${e.actualPrice}</span>`
                                                                    : `$${e.price}`
                                                                }
                                                            </div><!-- End .product-price -->
                                                            <div class="ratings-container">
                                                                <div class="ratings">
                                                                    <div class="ratings-val" style="width: 20%;"></div>
                                                                    <!-- End .ratings-val -->
                                                                </div><!-- End .ratings -->
                                                                <span class="ratings-text">( 2 Reviews )</span>
                                                            </div><!-- End .rating-container -->

                                                            <div class="product-nav product-nav-thumbs"
                                                                style="    gap: 1rem;">
                                                                ${e.images
                                                                  .map(
                                                                    (image) => `
                        <div href="#" class="active overflow-hidden" style="width: 40px; height: 40px; border: .5px solid #99999977;">
                            <img src="/productImage/${image}" class="w-100 h-100 object-fit-cover" alt="">
                        </div>
                    `
                                                                  )
                                                                  .join("")}

                                                            </div><!-- End .product-nav -->
                                                        </div><!-- End .product-body -->
                                                    </div>

                                                </div>`;
            });
            }
  
            productGalery.innerHTML = clutter;
          }
        });
    }
  </script>

  <style>
    body::-webkit-scrollbar {
      width: 0;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://unpkg.com/@studio-freight/lenis@1.0.33/dist/lenis.min.js"></script>
  <script src="js/base.js"></script>
  <%- include('../layout/footer.ejs') -%>
</body>
